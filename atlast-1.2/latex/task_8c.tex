\hypertarget{task_8c}{}\section{Free\+R\+T\+O\+S/task.c File Reference}
\label{task_8c}\index{Free\+R\+T\+O\+S/task.\+c@{Free\+R\+T\+O\+S/task.\+c}}
{\ttfamily \#include \char`\"{}atlsrc.\+h\char`\"{}}\newline
Include dependency graph for task.\+c\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{task_8c_ab6e83cab638644085d64608e8acddf55}{atlast\+Thread} (void const $\ast$args)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{task_8c_ab6e83cab638644085d64608e8acddf55}\label{task_8c_ab6e83cab638644085d64608e8acddf55}} 
\index{task.\+c@{task.\+c}!atlast\+Thread@{atlast\+Thread}}
\index{atlast\+Thread@{atlast\+Thread}!task.\+c@{task.\+c}}
\subsubsection{\texorpdfstring{atlast\+Thread()}{atlastThread()}}
{\footnotesize\ttfamily void atlast\+Thread (\begin{DoxyParamCaption}\item[{void const $\ast$}]{args }\end{DoxyParamCaption})}



Definition at line 3 of file task.\+c.


\begin{DoxyCode}
3                                     \{
4     uint8\_t buff[80];
5 \textcolor{comment}{//  int i=0;}
6 
7     \textcolor{keyword}{static} \textcolor{keyword}{struct }taskData myData;
8     memset((\textcolor{keywordtype}{void} *)&myData,0,\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} taskData));
9 
10     \hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer}=(\textcolor{keywordtype}{char} *)malloc(OUT\_SIZE);
11     memset(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer},0,OUT\_SIZE);
12 
13 
14     myData.iam=osMessageCreate(osMessageQ(atlastQ),NULL);
15     \textcolor{comment}{// myData.lock = xSemaphoreCreateMutex();}
16 
17     task[TST\_HARNESS] = &myData;
18 
19     txBuffer(&huart2, (uint8\_t *)\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
20     \hyperlink{atlast_8c_a58f9de18b337d19aebc0e01ea7b9a897}{atl\_init}();
21 
22 \textcolor{preprocessor}{#ifdef BANNER}
23     txBuffer(&huart2, (uint8\_t *)\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nBased on ATLAST 1.2 (2007-10-07)\(\backslash\)n"});
24     txBuffer(&huart2, (uint8\_t *)\textcolor{stringliteral}{"The original version of this program is in the public domain.\(\backslash\)n"});
25     txBuffer(&huart2, (uint8\_t *)\textcolor{stringliteral}{"Modifications are the property of Elcometer Ltd.\(\backslash\)n"});
26     sprintf(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer},\textcolor{stringliteral}{"Compiled: %s\(\backslash\)n"},\_\_DATE\_\_);
27 
28     txBuffer(&huart2, (uint8\_t *)\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer});
29 
30 \textcolor{preprocessor}{#endif}
31     \textcolor{keyword}{extern} \hyperlink{structdw}{dictword} *rf;
32     \hyperlink{atldef_8h_ae7d38601dfbd73adbe5c1b3ec34e0e13}{Boolean} *runFlag;
33     int8\_t len=0;
34 
35     uint8\_t lineBuffer[\hyperlink{atldef_8h_a842ed03f27719bc87666bfd1f75415b8}{MAX\_LINE}];
36 
37     runFlag = (\hyperlink{atldef_8h_ae7d38601dfbd73adbe5c1b3ec34e0e13}{Boolean} *) \hyperlink{atlast_8c_aefca9d78d34408dbb6c1fcd35e238bbc}{atl\_body}( rf );
38 
39     \textcolor{comment}{// This only works if the enumeration increases in value from the first to the last}
40 
41     sprintf(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer},\textcolor{stringliteral}{"%d constant NO\_TASK"}, NO\_TASK);
42     \hyperlink{atlast_8c_a45d749d6527e7183b11e7c928bf763e5}{atl\_eval}(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer});
43 
44     sprintf(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer},\textcolor{stringliteral}{"%d constant TST\_HARNESS"},TST\_HARNESS);
45     \hyperlink{atlast_8c_a45d749d6527e7183b11e7c928bf763e5}{atl\_eval}(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer});
46 
47     sprintf(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer},\textcolor{stringliteral}{"%d constant TST\_RX"},TST\_RX);
48     \hyperlink{atlast_8c_a45d749d6527e7183b11e7c928bf763e5}{atl\_eval}(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer});
49 
50     sprintf(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer},\textcolor{stringliteral}{"%d constant LAST\_TASK"},LAST\_TASK);
51     \hyperlink{atlast_8c_a45d749d6527e7183b11e7c928bf763e5}{atl\_eval}(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer});
52 
53     \textcolor{keywordflow}{do} \{
54         memset(lineBuffer,0,\hyperlink{atldef_8h_a842ed03f27719bc87666bfd1f75415b8}{MAX\_LINE});
55         len=\hyperlink{atlast_8c_a67f8aeec55161068563efca27bf2892d}{readLineFromArray}(\hyperlink{atlsrc_8h_abc0a409baba3682ee63c7d691b363b29}{nvramrc},lineBuffer);
56         \hyperlink{atlast_8c_a45d749d6527e7183b11e7c928bf763e5}{atl\_eval}(lineBuffer);
57     \} \textcolor{keywordflow}{while}(len >=0);
58 
59     \textcolor{keywordflow}{while}(\textcolor{keyword}{true}) \{
60             (void)memset(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer},0,\textcolor{keyword}{sizeof}(\hyperlink{atlcfig_8h_a2f25dee1596892b07e30dd78f5ebe81b}{outBuffer}));
61             txBuffer(&huart2, (uint8\_t *)\textcolor{stringliteral}{"--> "});
62             (void)rxLine(console , buff, 80,\textcolor{keyword}{true} );
63             \hyperlink{atlast_8c_a45d749d6527e7183b11e7c928bf763e5}{atl\_eval}(buff);
64             txBuffer(&huart2, (uint8\_t *)\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
65     \}
66 \}
\end{DoxyCode}
Here is the call graph for this function\+:
% FIG 1
