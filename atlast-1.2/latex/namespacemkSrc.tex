\hypertarget{namespacemkSrc}{}\section{mk\+Src Namespace Reference}
\label{namespacemkSrc}\index{mk\+Src@{mk\+Src}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespacemkSrc_a2912f80b0972d6bef1ca6d6bd8dd97f8}{usage} ()
\item 
def \hyperlink{namespacemkSrc_a2295e28381950f839d54f2db1af19d21}{remove\+Comments} (code)
\item 
def \hyperlink{namespacemkSrc_a397eab54ba44c6e689aba237b2f0ef0a}{main} ()
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\Hypertarget{namespacemkSrc_a397eab54ba44c6e689aba237b2f0ef0a}\label{namespacemkSrc_a397eab54ba44c6e689aba237b2f0ef0a}} 
\index{mk\+Src@{mk\+Src}!main@{main}}
\index{main@{main}!mk\+Src@{mk\+Src}}
\subsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def mk\+Src.\+main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 45 of file mk\+Src.\+py.


\begin{DoxyCode}
45 \textcolor{keyword}{def }\hyperlink{namespacemkSrc_a397eab54ba44c6e689aba237b2f0ef0a}{main}():
46 
47     outFile=\textcolor{stringliteral}{""}
48     files=\textcolor{stringliteral}{""}
49     verbose=\textcolor{keyword}{False}
50     debug=\textcolor{keyword}{False}
51 
52     \textcolor{keywordflow}{if}  len(sys.argv) <= 1:
53         \hyperlink{namespacemkSrc_a2912f80b0972d6bef1ca6d6bd8dd97f8}{usage}()
54         sys.exit(1)
55 
56     \textcolor{keywordflow}{try}:
57         opts, args = getopt.getopt(sys.argv[1:], \textcolor{stringliteral}{"dhf:o:v"},[])
58     \textcolor{keywordflow}{except} getopt.GetoptError \textcolor{keyword}{as} err:
59         \textcolor{keywordflow}{print} str(err)
60         \hyperlink{namespacemkSrc_a2912f80b0972d6bef1ca6d6bd8dd97f8}{usage}()
61         sys.exit(2)
62 
63     \textcolor{keywordflow}{for} o,a \textcolor{keywordflow}{in} opts:
64         \textcolor{keywordflow}{if} o == \textcolor{stringliteral}{"-f"}:
65             files=a.split()
66         \textcolor{keywordflow}{elif} o == \textcolor{stringliteral}{"-d"}:
67             debug=\textcolor{keyword}{True}
68         \textcolor{keywordflow}{elif} o == \textcolor{stringliteral}{"-h"}:
69             \hyperlink{namespacemkSrc_a2912f80b0972d6bef1ca6d6bd8dd97f8}{usage}()
70             sys.exit(3)
71         \textcolor{keywordflow}{elif} o == \textcolor{stringliteral}{"-o"}:
72             outFile = a
73         \textcolor{keywordflow}{elif} o == \textcolor{stringliteral}{"-v"}:
74             verbose=\textcolor{keyword}{True}
75 
76     \textcolor{keywordflow}{if} debug:
77         \textcolor{keywordflow}{print} >> sys.stderr, \textcolor{stringliteral}{"files :"},files
78         \textcolor{keywordflow}{print} >> sys.stderr, \textcolor{stringliteral}{"Output:"} + outFile
79 
80 
81 
82     header =  \textcolor{stringliteral}{"// \(\backslash\)n"}
83     header +=  \textcolor{stringliteral}{"// Autogenerated, do not edit.\(\backslash\)n"}
84     header +=  \textcolor{stringliteral}{"// \(\backslash\)n"}
85     header += \textcolor{stringliteral}{"\(\backslash\)n"}
86     header +=  \textcolor{stringliteral}{"#ifndef \_\_ATL\_SRC\(\backslash\)n"}
87     header +=  \textcolor{stringliteral}{"#define \_\_ATL\_SRC\(\backslash\)n\(\backslash\)n"}
88 
89     header += \textcolor{stringliteral}{'uint8\_t nvramrc[] = "'}
90 
91     output=\textcolor{stringliteral}{""}
92     \textcolor{keywordflow}{for} file \textcolor{keywordflow}{in} files:
93         \textcolor{keywordflow}{if} verbose:
94             \textcolor{keywordflow}{print} >> sys.stderr, \textcolor{stringliteral}{"Reading "} + file
95         with open(file) \textcolor{keyword}{as} inf:
96             \textcolor{keywordflow}{for} line \textcolor{keywordflow}{in} inf:
97                 \textcolor{keywordflow}{if} len(line) > 1:
98                     \textcolor{keywordflow}{if} line[0] != \textcolor{stringliteral}{'\(\backslash\)\(\backslash\)'} \textcolor{keywordflow}{and} line[0] != \textcolor{stringliteral}{'('}:
99 \textcolor{comment}{#                        output += removeComments(line)}
100                         tmp = \hyperlink{namespacemkSrc_a2295e28381950f839d54f2db1af19d21}{removeComments}(line)
101                         output += tmp.replace(\textcolor{stringliteral}{'"'},\textcolor{stringliteral}{'\(\backslash\)\(\backslash\)"'})
102                         output = (output.strip() + \textcolor{stringliteral}{'\(\backslash\)\(\backslash\)n'})
103 
104     output += \textcolor{stringliteral}{'";'}
105 
106     output +=\textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)n#endif\(\backslash\)n\(\backslash\)n"}
107 
108     res=header + output
109 
110     \textcolor{keywordflow}{if} len(outFile) == 0:
111         \textcolor{keywordflow}{print}
112         \textcolor{keywordflow}{print} res
113         \textcolor{keywordflow}{print}
114     \textcolor{keywordflow}{else}:
115         f=open(outFile,\textcolor{stringliteral}{'w'})
116         \textcolor{keywordflow}{print} >>f
117         \textcolor{keywordflow}{print} >>f, res 
118 
119 
120 \textcolor{comment}{# print removeComments( "test      ( test ) and \(\backslash\)\(\backslash\) more" )}
121 \hyperlink{namespacemkSrc_a397eab54ba44c6e689aba237b2f0ef0a}{main}()
122 \end{DoxyCode}
Here is the call graph for this function\+:
% FIG 0
\mbox{\Hypertarget{namespacemkSrc_a2295e28381950f839d54f2db1af19d21}\label{namespacemkSrc_a2295e28381950f839d54f2db1af19d21}} 
\index{mk\+Src@{mk\+Src}!remove\+Comments@{remove\+Comments}}
\index{remove\+Comments@{remove\+Comments}!mk\+Src@{mk\+Src}}
\subsubsection{\texorpdfstring{remove\+Comments()}{removeComments()}}
{\footnotesize\ttfamily def mk\+Src.\+remove\+Comments (\begin{DoxyParamCaption}\item[{}]{code }\end{DoxyParamCaption})}



Definition at line 18 of file mk\+Src.\+py.


\begin{DoxyCode}
18 \textcolor{keyword}{def }\hyperlink{namespacemkSrc_a2295e28381950f839d54f2db1af19d21}{removeComments}( code ):
19     out=\textcolor{stringliteral}{""}
20     hit=\textcolor{keyword}{False}
21 
22     endChar = \textcolor{stringliteral}{')'}
23 
24     tmp=list( code )
25     \textcolor{keywordflow}{for} c \textcolor{keywordflow}{in} tmp:
26         
27         \textcolor{keywordflow}{if} c == \textcolor{stringliteral}{'('}:
28             hit=\textcolor{keyword}{True}
29             endChar=\textcolor{stringliteral}{')'}
30 
31         \textcolor{keywordflow}{if} c == \textcolor{stringliteral}{'\(\backslash\)\(\backslash\)'}:
32             hit=\textcolor{keyword}{True}
33             endChar=\textcolor{stringliteral}{'\(\backslash\)n'}
34 
35         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} hit:
36             out +=c
37         
38         \textcolor{keywordflow}{if} hit \textcolor{keywordflow}{and} c == endChar :
39             hit = \textcolor{keyword}{False}
40 
41     out.strip()
42     result=re.sub(\textcolor{stringliteral}{' +'},\textcolor{stringliteral}{' '},out)
43     \textcolor{keywordflow}{return} result
44 
\end{DoxyCode}
Here is the caller graph for this function\+:
% FIG 1
\mbox{\Hypertarget{namespacemkSrc_a2912f80b0972d6bef1ca6d6bd8dd97f8}\label{namespacemkSrc_a2912f80b0972d6bef1ca6d6bd8dd97f8}} 
\index{mk\+Src@{mk\+Src}!usage@{usage}}
\index{usage@{usage}!mk\+Src@{mk\+Src}}
\subsubsection{\texorpdfstring{usage()}{usage()}}
{\footnotesize\ttfamily def mk\+Src.\+usage (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 7 of file mk\+Src.\+py.


\begin{DoxyCode}
7 \textcolor{keyword}{def }\hyperlink{namespacemkSrc_a2912f80b0972d6bef1ca6d6bd8dd97f8}{usage}():
8     \textcolor{keywordflow}{print}
9     \textcolor{keywordflow}{print} \textcolor{stringliteral}{'Usage: mkSrc.py -v -f "<file1.atl> .... <filen.atl>" -o <output.h>'}
10     \textcolor{keywordflow}{print}
11     \textcolor{keywordflow}{print} \textcolor{stringliteral}{'Synopsys:'}
12     \textcolor{keywordflow}{print} \textcolor{stringliteral}{'\(\backslash\)tConcatenate the contents of the files given in to a string and'}
13     \textcolor{keywordflow}{print} \textcolor{stringliteral}{'\(\backslash\)tproduce a C header file.  If -o not given results are sent to stdout.'}
14     \textcolor{keywordflow}{print} \textcolor{stringliteral}{'Example:'}
15     \textcolor{keywordflow}{print} \textcolor{stringliteral}{'\(\backslash\)tmkSrc.py -f "f1.atl f2.atl" -o src.h'}
16     \textcolor{keywordflow}{print}
17 
\end{DoxyCode}
Here is the caller graph for this function\+:
% FIG 2
